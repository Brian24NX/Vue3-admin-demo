import{u as x,P as N}from"./index.71781e9c.js";import{u as F,a as J}from"./useEditDialog.03c11ef1.js";import{b as T,J as K,p as P,K as M,c as g,w as o,u as e,r as l,o as i,f as a,m as j,e as R,F as I,g as S,L,h as U,I as B,l as z,N as G,t as H}from"./vendor.26126477.js";const Q=T({__name:"edit-dialog",props:{show:{type:Boolean,default:!1},data:null},emits:["close","confirm"],setup(V,{emit:v}){const r=V,h={username:[{required:!0,message:"Username can not be empty!",trigger:"blur"}],nickname:[{required:!0,message:"Nickname can not be empty!",trigger:"blur"}]},C=K(()=>[{label:"Administrator",value:"ROLE_ADMIN"},{label:"Common User",value:"ROLE_USER"}]),p={id:"",username:"",nickname:"",roles:[],permissions:[]},t=P(r.data||p);M(r,m=>{t.value=m.data||p});const y=K(()=>r.show),k=P(null),b=()=>{v("confirm",t.value)};return(m,n)=>{const _=l("t-input"),u=l("t-form-item"),E=l("t-select"),f=l("t-form"),c=l("t-dialog");return i(),g(c,{ref:"dialog",width:"900px",visible:e(y),header:t.value.id?"Edit User":"Create User",onClose:n[3]||(n[3]=s=>m.$emit("close")),onConfirm:b},{default:o(()=>[a(f,{ref_key:"form",ref:k,data:t.value,rules:h},{default:o(()=>[a(u,{label:"Username",name:"username"},{default:o(()=>[a(_,{placeholder:"Please type your Username",modelValue:t.value.username,"onUpdate:modelValue":n[0]||(n[0]=s=>t.value.username=s)},null,8,["modelValue"])]),_:1}),a(u,{label:"Nickname",name:"nickname"},{default:o(()=>[a(_,{placeholder:"Please type your Nickname",modelValue:t.value.nickname,"onUpdate:modelValue":n[1]||(n[1]=s=>t.value.nickname=s)},null,8,["modelValue"])]),_:1}),a(u,{label:"Roles",name:"roles"},{default:o(()=>[a(E,{modelValue:t.value.roles,"onUpdate:modelValue":n[2]||(n[2]=s=>t.value.roles=s),options:e(C),clearable:"",multiple:""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}}),W={class:"action-area"},X={class:"search-area"},ae=T({__name:"index",setup(V){const v=[{colKey:"id",title:"ID"},{colKey:"username",title:"Username"},{colKey:"nickname",title:"Nickname"},{colKey:"roles",title:"Roles"},{colKey:"operation",title:"Operation"}],r=j({name:""}),{data:h,fetchData:C,pagination:p,loading:t,onPageChange:y}=F(x,r),{showDialog:k,editData:b,handleCreate:m,handleEdit:n,onDialogClose:_,handleConfirm:u}=J(x,"User");return(E,f)=>{const c=l("t-button"),s=l("t-input"),A=l("t-tag"),$=l("t-table"),O=l("t-card"),w=G("permission");return i(),R(I,null,[a(O,null,{default:o(()=>[S("div",W,[L((i(),g(c,{onClick:e(m)},{default:o(()=>[U(" Create User ")]),_:1},8,["onClick"])),[[w,e(N).USER_LIST_CREATE]])]),S("div",X,[a(s,{class:"search-input",modelValue:r.name,"onUpdate:modelValue":f[0]||(f[0]=d=>r.name=d),placeholder:"Please type your Username"},null,8,["modelValue"]),a(c,{onClick:e(C)},{icon:o(()=>[a(e(B),{name:"search"})]),_:1},8,["onClick"])]),a($,{loding:e(t),rowKey:"index",columns:v,data:e(h),pagination:e(p),onPageChange:e(y)},{operation:o(d=>[L((i(),g(c,{variant:"text",theme:"primary",onClick:D=>e(n)(d)},{default:o(()=>[a(e(B),{name:"edit"}),U(" Edit ")]),_:2},1032,["onClick"])),[[w,e(N).USER_LIST_EDIT]])]),roles:o(d=>[(i(!0),R(I,null,z(d.row.roles,(D,q)=>(i(),g(A,{key:q,theme:"primary",variant:"light",style:{"margin-right":"8px",cursor:"pointer"}},{default:o(()=>[U(H(D),1)]),_:2},1024))),128))]),_:1},8,["loding","data","pagination","onPageChange"])]),_:1}),a(Q,{show:e(k),data:e(b),onClose:e(_),onConfirm:e(u)},null,8,["show","data","onClose","onConfirm"])],64)}}});export{ae as default};
