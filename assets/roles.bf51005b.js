import{i as R,p as L,P as D}from"./index.71781e9c.js";import{a as A,u as F}from"./useEditDialog.03c11ef1.js";import{b as S,p as P,K as O,J as q,c as v,w as n,u as e,r,o as d,f as o,k as x,m as J,e as j,F as z,g as N,L as U,h as K,I as B,N as G}from"./vendor.26126477.js";const H=i=>R.get("/roles",{params:i}),M=i=>R.post("/roles",i),Q=(i,u)=>R.post(`/roles/${i}`,u),I={list:H,create:M,edit:Q},W=S({__name:"role-edit-dialog",props:{show:{type:Boolean,default:!1},data:null},emits:["close","confirm"],setup(i,{emit:u}){const s=i,g={name:[{required:!0,message:"Role Name can not be empty!",trigger:"blur"}]},b={id:"",name:"",label:"",permissions:[]},a=P(s.data||b);O(s,c=>{a.value=c.data||b});const C=q(()=>s.show),h=P(null),y=()=>{u("confirm",a.value)};return(c,l)=>{const p=r("t-input"),_=r("t-form-item"),V=r("t-tree"),k=r("t-form"),m=r("t-dialog");return d(),v(m,{ref:"dialog",width:"900px",visible:e(C),header:a.value.id?"Edit Role":"Create Role",onClose:l[3]||(l[3]=t=>c.$emit("close")),onConfirm:y},{default:n(()=>[o(k,{ref_key:"form",ref:h,class:"dialog-form",data:a.value,rules:g},{default:n(()=>[o(_,{label:"Role name",name:"name"},{default:n(()=>[a.value.id?(d(),v(p,{key:0,disabled:"",value:a.value.name},null,8,["value"])):x("",!0),a.value.id?x("",!0):(d(),v(p,{key:1,placeholder:"Please type your Role Name",modelValue:a.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>a.value.name=t)},null,8,["modelValue"]))]),_:1}),o(_,{label:"Role label",name:"label"},{default:n(()=>[o(p,{placeholder:"Please type your Role Label",modelValue:a.value.label,"onUpdate:modelValue":l[1]||(l[1]=t=>a.value.label=t)},null,8,["modelValue"])]),_:1}),o(_,{label:"Permission group",name:"permissions"},{default:n(()=>[o(V,{data:e(L),hover:"","expand-all":"",checkable:!0,"value-mode":"all",modelValue:a.value.permissions,"onUpdate:modelValue":l[2]||(l[2]=t=>a.value.permissions=t)},null,8,["data","modelValue"])]),_:1})]),_:1},8,["data"])]),_:1},8,["visible","header"])}}}),X={class:"action-area"},Y={class:"search-area"},le=S({__name:"roles",setup(i){const u=[{colKey:"id",title:"ID"},{colKey:"name",title:"Role name"},{colKey:"label",title:"Role label"},{colKey:"operation",title:"Operation"}],s=J({name:"",label:""}),{showDialog:g,editData:b,handleCreate:a,onDialogClose:C,handleEdit:h,handleConfirm:y}=A(I,"Role"),{data:c,fetchData:l,pagination:p,loading:_,onPageChange:V}=F(I,s);return(k,m)=>{const t=r("t-button"),E=r("t-input"),T=r("t-table"),$=r("t-card"),w=G("permission");return d(),j(z,null,[o($,null,{default:n(()=>[N("div",X,[U((d(),v(t,{onClick:e(a)},{default:n(()=>[K("Create Role ")]),_:1},8,["onClick"])),[[w,e(D).USER_ROLES_CREATE]])]),N("div",Y,[o(E,{class:"search-input",modelValue:s.name,"onUpdate:modelValue":m[0]||(m[0]=f=>s.name=f),placeholder:"Please type your Role name"},null,8,["modelValue"]),o(E,{class:"search-input",modelValue:s.label,"onUpdate:modelValue":m[1]||(m[1]=f=>s.label=f),placeholder:"Please type your Role label"},null,8,["modelValue"]),o(t,{onClick:e(l)},{icon:n(()=>[o(e(B),{name:"search"})]),_:1},8,["onClick"])]),o(T,{loading:e(_),"row-key":"index",columns:u,data:e(c),pagination:e(p),onPageChange:e(V)},{operation:n(f=>[U((d(),v(t,{variant:"text",theme:"primary",onClick:Z=>e(h)(f)},{default:n(()=>[o(e(B),{name:"edit"}),K(" Edit ")]),_:2},1032,["onClick"])),[[w,e(D).USER_LIST_EDIT]])]),_:1},8,["loading","data","pagination","onPageChange"])]),_:1}),o(W,{show:e(g),data:e(b),onClose:e(C),onConfirm:e(y)},null,8,["show","data","onClose","onConfirm"])],64)}}});export{le as default};
